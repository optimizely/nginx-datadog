load_module /datadog-tests/ngx_http_datadog_module.so;

error_log /dev/stdout debug;

events {
    worker_connections  1024;
}

http {
    server {
        datadog_rum on;
        datadog_disable;
        datadog_rum_configuration /datadog-tests/rum_conf.json;

        access_log /dev/stdout;
        error_log /dev/stdout debug;

        root /datadog-tests/html;
        listen       80;
        server_name  localhost;

        location / {
          index  index.html index.htm;
        }

        location /disable-rum {
          datadog_rum off;
          try_files /index.html =404;
        }

        location /proxy {
          #datadog_rum off;
          proxy_pass http://host.docker.internal:8081;
        }
    }
}
